// JavaScript Documentvar galerie = Array();var idPhoto = 0;var folder = "";var largeur = 0;var hauteur = 0;function contented() { 	var frame_x = $('body').width(); 	$('#menu').css('width', 600);	$('#viewer').css('width', frame_x-600);}//$(document).ready( function() { contented(); } );//$(window).resize( function() { contented(); } );//FONCTION D'AFFICHAGE/MASQUAGE DU MENUfunction montre(id) {			var d = document.getElementById(id);	if(d){		var oldState = d.style.display;	}	for (var i = 0; i<=100; i++) {		if (document.getElementById('smenu'+i)) {			document.getElementById('smenu'+i).style.display='none';		}	}			if(d && oldState=='none'){		d.style.display='block';	}}//FONCTION DE DEFILEMENT DE LA GALERIEfunction defilGalerie(valeur){	var conteneurPhoto = document.getElementById('imgbox') ;	var legende = document.getElementById('titre') ;		if(valeur == "-"){		idPhoto--;	}else if(valeur == "+"){		idPhoto++;	}else{		idPhoto = valeur;	}		//alert (idPhoto);		if (idPhoto>=galerie.length){		idPhoto = 0;	}else if(idPhoto<0){		idPhoto = galerie.length-1;	}	//alert (idPhoto);		conteneurPhoto.src = galerie[idPhoto][0];	legende.innerHTML = galerie[idPhoto][1]+" "+(idPhoto+1)+"/"+(galerie.length);	largeur = galerie[idPhoto][2];	hauteur = galerie[idPhoto][3];	tailleImage();}function selectGalerie(galerieRef,folderRef,infoTxt){	var conteneurPhoto = document.getElementById('imgbox') ;	var legende = document.getElementById('titre') ;	var info = document.getElementById('description') ;		galerie = galerieRef;	idPhoto = 0;	folder = folderRef;		conteneurPhoto.src = galerie[idPhoto][0];	legende.innerHTML = galerie[idPhoto][1]+" "+(idPhoto+1)+"/"+(galerie.length);	info.innerHTML = infoTxt;	defilGalerie(idPhoto);}function adminSelectGalerie(folder,infoTxt){	var info = document.getElementById('adminDescription') ;	var ledossier = document.getElementById('folderRef') ;	idPhoto = 0;		ledossier.value = folder;	info.innerHTML = infoTxt;}function redim(){	marge = 0;	xPos = marge;	yPos = marge;	largeur = screen.availWidth-2*marge; 	hauteur = screen.availHeight-2*marge;		self.focus();	self.moveTo(xPos,yPos);	self.resizeTo(largeur,hauteur);}function MM_openBrWindow(theURL,winName,features) { //v2.0  window.open(theURL+"?idPhoto="+idPhoto+"&folder="+folder,winName,features);}function tailleImage(){	var screenW = 0;	var screenH = 0;	if( typeof( window.innerWidth ) == 'number' ) {		//Non-IE		screenW = window.innerWidth;		screenH = window.innerHeight;	} else if( document.documentElement && ( document.documentElement.clientWidth || document.documentElement.clientHeight ) ) {		//IE 6+ in 'standards compliant mode'		screenW = document.documentElement.clientWidth;		screenH = document.documentElement.clientHeight;	} else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {		//IE 4 compatible		screenW = document.body.clientWidth;		screenH = document.body.clientHeight;	}		var screenH = parseInt(screenH)-200;	var screenW = parseInt(screenW)-650;	hauteur = parseInt(hauteur);	largeur = parseInt(largeur);	var rapportEcran = screenH/screenW;	var rapportImage = hauteur/largeur;			if (rapportEcran <= rapportImage){		//100% hauteur		document.getElementById("imgbox").style.width  = screenH*largeur/hauteur+"px";		document.getElementById("imgbox").style.height = screenH+"px";			}else if (rapportEcran > rapportImage){		//100% largeur		document.getElementById("imgbox").style.width = screenW+"px";		document.getElementById("imgbox").style.height = screenW*hauteur/largeur+"px";	}		}function hideform(formId){	var listform = new Array('insertpage','insertprojet','insertpays','insertimage');			for (i=0; i<listform.length; i++){		formulaire = document.getElementById(listform[i]) ;								if(formId && formId == listform[i]){			if(formulaire.style.display=='none'){				formulaire.style.display='block';			}else{				formulaire.style.display='none';			}		}else{			formulaire.style.display='none';			}	}			}function checkSuppr(){	var x=window.confirm('Attention vous allez supprimer un element, continuer ?');  	return x;	}function saveNewsletter(id){	var xhr_object = null; 		if(window.XMLHttpRequest) // Firefox 		xhr_object = new XMLHttpRequest(); 	else if(window.ActiveXObject) // Internet Explorer 		xhr_object = new ActiveXObject("Microsoft.XMLHTTP"); 	else { // XMLHttpRequest non supporté par le navigateur 		alert("Votre navigateur ne supporte pas les objets XMLHTTPRequest..."); 		return; 	} 			var filename 		= "XMLrequest_save_old.php"; 	var liste_id       		= document.getElementById("save_value").value;	var newsletter_id 	= id;	var data			= null; 		if(liste_id != "" && newsletter_id !=""){		data = "id_news="+newsletter_id+"&liste_id="+liste_id; 	}			xhr_object.open("POST", filename, true); 		xhr_object.onreadystatechange = function() { 		if(xhr_object.readyState == 4) { 			var tmp = xhr_object.responseText.split(":"); 			if(typeof(tmp) != "undefined") { 				document.getElementById("result").value = tmp[0];				//document.getElementById("reponse").innerHTML = tmp[0];			} 			//alert(tmp[0]);					} 	} 		xhr_object.setRequestHeader("Content-type", "application/x-www-form-urlencoded"); 	xhr_object.send(data);}function refreshListEvent(id){	var xhr_object = null; 		if(window.XMLHttpRequest) // Firefox 		xhr_object = new XMLHttpRequest(); 	else if(window.ActiveXObject) // Internet Explorer 		xhr_object = new ActiveXObject("Microsoft.XMLHTTP"); 	else { // XMLHttpRequest non supporté par le navigateur 		alert("Votre navigateur ne supporte pas les objets XMLHTTPRequest..."); 		return; 	} 			var filename 		= "XMLrequest_refresh_list.php"; 	var annee			= document.getElementById("year").value;	var mois			= document.getElementById("mois").value;	var newsletter_id 	= id;	var data			= null; 		if(liste_id != "" && newsletter_id !=""){		data = "id_news="+newsletter_id+";annee="+annee+";mois="+mois; 	}			xhr_object.open("POST", filename, true); 		xhr_object.onreadystatechange = function() { 		if(xhr_object.readyState == 4) { 			var tmp = xhr_object.responseText.split(":"); 			if(typeof(tmp) != "undefined") { 				//document.getElementById("result").value = tmp[0];				document.getElementById("item_list").innerHTML = tmp;				$("ul#item_list,ul#evenements_list").dragsort({ dragselector:"li",  dragBetween: true, placeHolderTemplate: "<div></div>",dragEnd: saveOrderPage });			} 			//alert(tmp[0]);					} 	} 		xhr_object.setRequestHeader("Content-type", "application/x-www-form-urlencoded"); 	xhr_object.send(data);}